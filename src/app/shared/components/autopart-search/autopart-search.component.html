<div class="search-container">
  <form [formGroup]="searchForm" class="search-form">
    <!-- Main Search Row -->
    <div class="main-search-row">
      <!-- Search Input -->
      <div class="search-input-wrapper">
        <div class="input-group">
          <span class="input-group-text"> </span>
          <input
            type="text"
            formControlName="search"
            class="form-control"
            placeholder="Cerca per nome, codice o descrizione "
          />
        </div>
      </div>

      <!-- Condition Select (visible on desktop) -->
      <div class="condition-select d-none d-md-block">
        <select formControlName="condizione" class="form-select">
          <option value="">Qualsiasi</option>
          <option value="NUOVO">Nuovo</option>
          <option value="USATO">Usato</option>
          <option value="RICONDIZIONATO">Ricondizionato</option>
        </select>
      </div>

      <!-- Action Buttons -->
      <div class="action-buttons">
        <button
          type="button"
          class="btn btn-icon"
          (click)="resetForm()"
          title="Reset"
        >
          <i class="bi bi-arrow-counterclockwise"></i>
        </button>
        <button
          type="button"
          class="btn btn-icon"
          (click)="toggleAdvancedFilters()"
          title="Filtri avanzati"
        >
          <i
            [class]="
              isFiltersExpanded ? 'bi bi-chevron-up' : 'bi bi-chevron-down'
            "
          ></i>
        </button>
      </div>
    </div>

    <!-- Advanced Filters (collapsible) -->
    <div class="advanced-filters" [ngClass]="{ show: isFiltersExpanded }">
      <!-- Condition Select (visible on mobile) -->
      <div class="d-md-none mb-3">
        <select formControlName="condizione" class="form-select">
          <option value="">Qualsiasi condizione</option>
          <option value="NUOVO">Nuovo</option>
          <option value="USATO">Usato</option>
          <option value="RICONDIZIONATO">Ricondizionato</option>
        </select>
      </div>

      <div class="filters-grid">
        <input
          type="text"
          formControlName="codiceOe"
          class="form-control"
          placeholder="Codice OE"
        />

        <select
          formControlName="marca"
          class="form-select"
          (change)="onBrandSelected($event)"
        >
          <option value="">Seleziona marca...</option>
          <option *ngFor="let brand of brands" [value]="brand">
            {{ brand }}
          </option>
        </select>

        <div class="price-inputs">
          <input
            type="number"
            formControlName="minPrezzo"
            class="form-control"
            placeholder="Min €"
            min="0"
          />
          <input
            type="number"
            formControlName="maxPrezzo"
            class="form-control"
            placeholder="Max €"
            min="0"
          />
        </div>
      </div>
    </div>
  </form>
</div>
