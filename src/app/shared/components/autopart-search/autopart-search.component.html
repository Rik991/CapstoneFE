<div class="search-icon text-center" (click)="toggleFilters()">
  <i class="bi bi-search" style="font-size: 1.75rem"></i>
</div>

<div
  class="search-container p-4 bg-light rounded-3 mb-4"
  [ngClass]="{ 'd-none': !isExpanded }"
>
  <form [formGroup]="searchForm" class="row g-3">
    <!-- Prima riga -->
    <div class="col-12 col-md-6 col-lg-3">
      <div class="form-floating">
        <input
          type="text"
          formControlName="codiceOe"
          class="form-control"
          id="codiceOe"
          placeholder="Codice OE"
        />
        <label for="codiceOe">Codice OE</label>
      </div>
    </div>

    <div class="col-12 col-md-6 col-lg-3">
      <div class="form-floating">
        <select
          formControlName="marca"
          class="form-select"
          id="marca"
          (change)="onBrandSelected($event)"
        >
          <option value="">Seleziona...</option>
          <option *ngFor="let brand of brands" [value]="brand">
            {{ brand }}
          </option>
        </select>
        <label for="marca">Marca</label>
      </div>
    </div>

    <div class="col-12 col-md-6 col-lg-3">
      <div class="form-floating">
        <select
          formControlName="modello"
          class="form-select"
          id="modello"
          [attr.disabled]="!searchForm.get('marca')?.value"
        >
          <option value="">Seleziona...</option>
          <option *ngFor="let model of filteredModels" [value]="model">
            {{ model }}
          </option>
        </select>
        <label for="modello">Modello</label>
      </div>
    </div>

    <div class="col-12 col-md-6 col-lg-3">
      <div class="form-floating">
        <select
          formControlName="condizione"
          class="form-select"
          id="condizione"
        >
          <option value="">Seleziona...</option>
          <option value="NUOVO">Nuovo</option>
          <option value="USATO">Usato</option>
          <option value="RICONDIZIONATO">Ricondizionato</option>
        </select>
        <label for="condizione">Condizione</label>
      </div>
    </div>

    <!-- Seconda riga -->
    <div class="col-12 col-md-6 col-lg-3">
      <div class="form-floating">
        <input
          type="number"
          formControlName="minPrezzo"
          class="form-control"
          id="minPrezzo"
          placeholder="Prezzo minimo"
          min="0"
        />
        <label for="minPrezzo">Prezzo minimo</label>
      </div>
    </div>

    <div class="col-12 col-md-6 col-lg-3">
      <div class="form-floating">
        <input
          type="number"
          formControlName="maxPrezzo"
          class="form-control"
          id="maxPrezzo"
          placeholder="Prezzo massimo"
          min="0"
        />
        <label for="maxPrezzo">Prezzo massimo</label>
      </div>
    </div>

    <div class="col-12 col-md-6 col-lg-3">
      <div class="form-floating">
        <input
          type="text"
          formControlName="search"
          class="form-control"
          id="search"
          placeholder="Cerca..."
        />
        <label for="search">Cerca per nome o descrizione</label>
      </div>
    </div>

    <div class="col-12 col-md-6 col-lg-3 d-flex align-items-center">
      <button
        type="button"
        class="btn btn-secondary w-100 py-3"
        (click)="resetForm()"
      >
        <i class="bi bi-arrow-counterclockwise me-2"></i>
        Reset filtri
      </button>
    </div>
  </form>
</div>
