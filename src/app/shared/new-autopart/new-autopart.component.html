<!-- new-autopart.component.html -->
<form [formGroup]="form" (ngSubmit)="onSubmit()">
  <div class="form-group">
    <label>Nome</label>
    <input type="text" formControlName="nome" class="form-control" />
  </div>

  <div class="form-group">
    <label>Codice OE</label>
    <input type="text" formControlName="codiceOe" class="form-control" />
  </div>

  <div class="form-group">
    <label>Descrizione</label>
    <textarea formControlName="descrizione" class="form-control"></textarea>
  </div>

  <div class="form-group">
    <label>Categoria</label>
    <input type="text" formControlName="categoria" class="form-control" />
  </div>

  <div class="form-group">
    <label>Condizione</label>
    <select formControlName="condizione" class="form-control">
      <option value="NUOVO">Nuovo</option>
      <option value="USATO">Usato</option>
      <option value="RICONDIZIONATO">Ricondizionato</option>
    </select>
  </div>

  <div class="form-group">
    <label>Immagine</label>
    <input type="text" formControlName="immagine" class="form-control" />
  </div>

  <div class="form-group">
    <label>Prezzo</label>
    <input
      type="number"
      formControlName="prezzo"
      step="0.01"
      class="form-control"
    />
  </div>

  <div class="form-group">
    <label>Marca</label>
    <select (change)="onBrandSelected($event)" class="form-control">
      <option *ngFor="let brand of brands" [value]="brand">{{ brand }}</option>
    </select>
  </div>

  <div class="form-group">
    <label>Modelli</label>
    <div *ngIf="filteredModels.length === 0" class="text-muted">
      Seleziona prima una marca
    </div>
    <div *ngFor="let model of filteredModels" class="form-check">
      <input
        type="checkbox"
        [value]="model.id"
        (change)="toggleVehicleSelection(model.id)"
        class="form-check-input"
      />
      <label class="form-check-label">
        {{ model.marca }} {{ model.modello }} ({{ model.inizioProduzione }} -
        {{ model.fineProduzione }})
      </label>
    </div>
    <small
      *ngIf="form.get('veicoliIds')?.errors?.['required'] && form.get('veicoliIds')?.touched"
      class="text-danger"
    >
      Seleziona almeno un veicolo compatibile
    </small>
  </div>

  <button type="submit" class="btn btn-primary" [disabled]="!form.valid">
    Inserisci
  </button>
  <button type="button" class="btn btn-secondary" routerLink="/reseller">
    Torna alla Home
  </button>
</form>
